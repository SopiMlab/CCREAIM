# @package _global_
process:
  train: false
  cross_val_k: 0

logging:
  exp_name: smoke_test
  save_pred: true
  save_one_per_batch: false

data:
  data_tar: /scratch/other/sopi/CCREAIM/datasets/test/out/chopped_65536.tar

hyper:
  model: e2e-chunked_res-vqvae
  seed: 0
  latent_dim: 16
  num_seq: 16
  seq_cat: true
  seq_len: 4096
  batch_size: 16
  transformer:
    num_heads_latent_dimension_div: 2
    num_enc_layers: 1
    num_dec_layers: 1
    autoregressive_loss_weight: 1
    linear_map: true
  learning_rate: 1e-5
  spectral_loss:
    weight: 1e-3
    stft_bins:
      - 8
      - 4
      - 2
    stft_hop_length:
      - 2
      - 4
      - 8
    stft_window_size:
      - 4
      - 2
      - 1
  res_ae:
    levels: 1 # orig 3
    downs_t: # orig [3,2,2]
      - 5
    strides_t: # orig [2,2,2]
      - 2
    input_emb_width: 1
    block_width: 32
    block_depth: 3
    block_m_conv: 1.0
    block_dilation_growth_rate: 3
    block_dilation_cycle: null
  vqvae:
    num_embeddings: 256
    beta: 0.25
    reset_patience: -1


resources:
  # DataLoader num_workers parameter
  num_workers: 4
  partition: gpushort

  # General resource configs
  timeout_min: 60
  cpus_per_task: 4
  gpus_per_node: 1
  tasks_per_node: 1
  mem_gb: 1
  nodes: 1
